[
  {
    "objectID": "sections/activity-2/index.html",
    "href": "sections/activity-2/index.html",
    "title": "Topic Set 2 - Exploring Urban Greenhouse Gas Emissions (75 min)",
    "section": "",
    "text": "Activity 4: Use the Urban Dashboard to Examine GHG data in Urban Areas (15 min)\nExplore the similarities and differences between GHG characteristics between different urban areas and between different GHG gases within a given city.\nActivity 5: Use Notebooks to Further Explore Data in Jupyter Hub (30 min)\nUse a notebook in the JupyterHub to step through actions that develop figures and plots.\nActivity 6: Use GHG Data in QGIS and Access STAC (30 min)\nUse QGIS to read the GHG Center STAC data and devise plots that communicate information to decision makers.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "Activity Set 2 - Exploring Urban Greenhouse Gas Emissions",
      "Topic Set 2 - Exploring Urban Greenhouse Gas Emissions (75 min)"
    ]
  },
  {
    "objectID": "sections/welcome/index.html",
    "href": "sections/welcome/index.html",
    "title": "Welcome",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "Welcome"
    ]
  },
  {
    "objectID": "sections/us-ghg-center-and-veda/qgis-in-hub.html",
    "href": "sections/us-ghg-center-and-veda/qgis-in-hub.html",
    "title": "QGIS in the Hub",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "US GHG Center and VEDA / Data Access and Visualization",
      "QGIS in the Hub"
    ]
  },
  {
    "objectID": "sections/open-science-in-action/index.html",
    "href": "sections/open-science-in-action/index.html",
    "title": "Open Science in Action",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides."
  },
  {
    "objectID": "sections/activity-1/index.html",
    "href": "sections/activity-1/index.html",
    "title": "Topic Learning Set 1 - Exploring Wetland Methane Emissions (75 min)",
    "section": "",
    "text": "Activity 1: Start in Portal DataToolkit Page and Explore and Visualize Wetland Data (15 min)\nUse the Explore and Analysis environment and special GHG Center tools to better understand the differences in emissions over space and time.\nActivity 2: Use Jupyter Notebooks to Explore Data in the GHG Center Jupyter Hub (30 min)\nSign in and set up Jupyter hub environments to use open source tools and code. Access the GHG STAC data and data from other sources to create plots, time series and linear regressions.\nActivity 3: Use GHG Center Data in QGIS (30 min)\nLearn how GHG STAC API and datasets are integrated into QGIS and how to use GHG Data with other NASA CMR STAC data. Relate data understanding to actionable outcomes.\nUser feedback discussion - What did you like or dislike about the portal tools?",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "Activity Set 1 - Exploring Wetland Methane Emissions",
      "Topic Learning Set 1 - Exploring Wetland Methane Emissions (75 min)"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Advancing Open Science Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub",
    "section": "",
    "text": "üìÖ Dec 08, 2024, üï£ 01:00 PM - 04:30 PM EST, üìç Capitol/Congress (Marriott Marquis)\nüîó Session on the AGU Website",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Welcome"
    ]
  },
  {
    "objectID": "index.html#description",
    "href": "index.html#description",
    "title": "Advancing Open Science Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub",
    "section": "Description",
    "text": "Description\nThis half-day workshop will provide hands-on practice with efficiently using the U.S. Greenhouse Gas Center (US GHG Center) portal datasets, open-source tools, and computing resources for exploring, visualizing, and analyzing greenhouse gas data.\nThe US GHG Center portal was created to provide users with access to curated, trusted, and user-friendly greenhouse gas data and information. The portal contents reflect transparency in both data and methods to address different end user needs and to bring together actionable information from multiple sources. The portal contains a growing collection of federal and non-federal data to choose from.\nWorkshop activities encompass a hands-on demonstration of science questions using activities and portal data, services and tools. Participants will learn from GHG specialists about the latest science for a given region or location as they use the interface, hub cloud computing or QGIS to visualize and analyze the data. Feedback will be solicited to help improve user services and tools. Attendees will produce trends over time, compare data across selected times, utilize code notebooks with different datasets and develop detailed figures and charts. Example python code will be provided so that users can gain practice at using and adapting the open code and focus more on the activity than on building new code given the time limitations.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Welcome"
    ]
  },
  {
    "objectID": "index.html#learning-outcomes",
    "href": "index.html#learning-outcomes",
    "title": "Advancing Open Science Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub",
    "section": "Learning Outcomes",
    "text": "Learning Outcomes\nUpon completing this workshop, participants will be able to:\n\nUnderstand what GHG data products are available in the US GHG Center portal and use the data to answer scientific questions.\nUse the US GHG Center exploration and analysis environment to perform basic exploratory analyses of existing datasets and data layers.\nEmploy Jupyter notebooks to perform data analysis and visualization of US GHG Center data in the cloud.\nInteract with US GHG Center data using standard GIS workflows and APIs.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Welcome"
    ]
  },
  {
    "objectID": "index.html#target-audience",
    "href": "index.html#target-audience",
    "title": "Advancing Open Science Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub",
    "section": "Target Audience",
    "text": "Target Audience\nThe target audience for this workshop includes Earth Science researchers, educators, and students across all career stages and disciplines who are interested in utilizing GHG datasets and open-source tools for their research projects. The workshop will be beneficial for both experienced programmers seeking an overview of modern open tools and those just getting started with scientific programming.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Welcome"
    ]
  },
  {
    "objectID": "index.html#code-of-conduct",
    "href": "index.html#code-of-conduct",
    "title": "Advancing Open Science Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub",
    "section": "Code of Conduct",
    "text": "Code of Conduct\nThis workshop will be held following the Transform to Open Science Code of Conduct.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Welcome"
    ]
  },
  {
    "objectID": "team.html",
    "href": "team.html",
    "title": "Speakers",
    "section": "",
    "text": "Speakers\n\nDeborah Smith 1\nLesley Ott 2\nSid Chaudhary 1\n\n\n\nSupport Team\n\nGeneral Support\n\nJeann√© le Roux1\nSid Chaudhary 1\n\n\n\nInteractive Sessions\n\nEmily Bell 2\nJeann√© le Roux1\nSid Chaudhary 1\nSlesa Adhikari 1\n\n\n1 University of Alabama in Huntsville (UAH), 2 NASA Goddard Space Flight Center (GSFC),",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Team"
    ]
  },
  {
    "objectID": "setup/prerequisites.html",
    "href": "setup/prerequisites.html",
    "title": "Prerequisites",
    "section": "",
    "text": "Prerequisites\nTo follow along during the workshop, or to run through the notebooks contained within the repository using the 2i2c Cloud JupyterHub (cloud workspace), the following are required. All software or accounts are free.\n\nEarthdata Login account\n\nCreate an Earthdata Login account (if you don‚Äôt already have one) at https://urs.earthdata.nasa.gov/users/new\nRemember your username and password; you will need them to download or access data during the workshop and beyond.\n\nGitHub username\n\nCreate a GitHub account (if you don‚Äôt already have one) at https://github.com/join. Follow optional advice on choosing your username\nYour GitHub username is used to enable you access to a cloud environment during the workshop. To gain access, please request access to the NASA Openscapes JupyterHub using this form. You will receive an email invitation to join the organization on GitHub. You must join to gain access to the workspace.\n\n\nNetrc file\n\nThis file is needed to access NASA Earthdata assets from a scripting environment like Python.\nThere are multiple methods to create a .netrc file. For this workshop, earthaccess package is used to automatically create a netrc file using your Earthdata login credentials if one does not exist. There are detailed instruction available for creating a .netrc file.\nYou will need a netrc file containing your NASA Earthdata Login credentials in order to execute the notebooks. A netrc file can be created manually within text editor and saved to your home directory. An example of the required content is below.\n\nmachine urs.earthdata.nasa.gov\nlogin &lt;USERNAME&gt;\npassword &lt;PASSWORD&gt;\nLaptop or tablet\n\nParticipation in the exercises requires a laptop or tablet. Yes, a tablet works too! All workshop participants will have access to a 2i2c Jupyter Lab instance."
  },
  {
    "objectID": "prerequisites.html",
    "href": "prerequisites.html",
    "title": "Prerequisites",
    "section": "",
    "text": "Participants are expected to have a basic knowledge of the python programming language.\nParticipants MUST obtain the following to be able to follow along the workshop:\n\nUS GHG Center JupyterHub Access\nEarthdata credentials\n\n\n\nüö® Please make sure you have both of the accesses before you come to the workshop on Sunday.\n\n\n\nThe US GHG Center notebook environment is available to authorized users on an as-need basis. You can request access by using our Hub Access Request form.\n\nMake sure you have a GitHub Account. Take note of your GitHub username.\nFill out the request form and provide needed information. Make sure to use your organization/univerity email and use ‚ÄúAGU Workshop 2024‚Äù as the reason.\nWatch your email for notification of authorization and the invite to join the US GHG Center Hub Access GitHub Team.\nOnce you accept the invitation, you can go to hub.ghg.center and login using your GitHub credentials.\n\n\n\n\nFollow the tutorial on this link to register for Earthdata login: https://www.earthdata.nasa.gov/eosdis/science-system-description/eosdis-components/earthdata-login.\nMake sure to note your username and password.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Prerequisites"
    ]
  },
  {
    "objectID": "prerequisites.html#to-get-us-ghg-center-jupyterhub-access",
    "href": "prerequisites.html#to-get-us-ghg-center-jupyterhub-access",
    "title": "Prerequisites",
    "section": "",
    "text": "The US GHG Center notebook environment is available to authorized users on an as-need basis. You can request access by using our Hub Access Request form.\n\nMake sure you have a GitHub Account. Take note of your GitHub username.\nFill out the request form and provide needed information. Make sure to use your organization/univerity email and use ‚ÄúAGU Workshop 2024‚Äù as the reason.\nWatch your email for notification of authorization and the invite to join the US GHG Center Hub Access GitHub Team.\nOnce you accept the invitation, you can go to hub.ghg.center and login using your GitHub credentials.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Prerequisites"
    ]
  },
  {
    "objectID": "prerequisites.html#to-obtain-earthdata-credentials",
    "href": "prerequisites.html#to-obtain-earthdata-credentials",
    "title": "Prerequisites",
    "section": "",
    "text": "Follow the tutorial on this link to register for Earthdata login: https://www.earthdata.nasa.gov/eosdis/science-system-description/eosdis-components/earthdata-login.\nMake sure to note your username and password.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Prerequisites"
    ]
  },
  {
    "objectID": "ghg-center-at-agu-2024.html",
    "href": "ghg-center-at-agu-2024.html",
    "title": "The US GHG Center at American Geophysical Union Annual Meeting 2024",
    "section": "",
    "text": "Join us for events and presentations at the 2024 AGU Annual Meeting, held December 9-13, 2024 in Washington, D.C.\nThis list continues to be updated as presentation times and locations are confirmed. Check back here for the latest list of where to engage with and hear from the US GHG Center!"
  },
  {
    "objectID": "ghg-center-at-agu-2024.html#pre-conference-workshop",
    "href": "ghg-center-at-agu-2024.html#pre-conference-workshop",
    "title": "The US GHG Center at American Geophysical Union Annual Meeting 2024",
    "section": "Pre-Conference Workshop",
    "text": "Pre-Conference Workshop\nPREWS17 - Advancing Open Science: Greenhouse Gas Emission Data Analysis Using the U.S. Greenhouse Gas Center‚Äôs Jupyter Hub\nüìÖ Dec 08, 2024, üï£ 01:00 PM - 04:30 PM EST, üìç Capitol/Congress (Marriott Marquis)\nThis half-day workshop will provide hands-on practice to efficiently use the U.S. Greenhouse Gas Center (US GHG Center) key datasets, open-source tools, and computing resources for exploring, visualizing, analyzing, and communicating science."
  },
  {
    "objectID": "ghg-center-at-agu-2024.html#orals-oral-sessions",
    "href": "ghg-center-at-agu-2024.html#orals-oral-sessions",
    "title": "The US GHG Center at American Geophysical Union Annual Meeting 2024",
    "section": "Orals & Oral Sessions",
    "text": "Orals & Oral Sessions\nSY21A - Providing Accessible and Credible Greenhouse Gas Information from the U.S. Government and Partners to Meet User Needs\nüìÖ Dec 10, 2024, üï£ 08:30 AM - 10:00 AM EST, üìç Independence D (Marriott Marquis)\nDuring this session, we will demonstrate how the US GHG Center is playing a pivotal role in implementing the ‚ÄúNational Strategy to Advance an Integrated US Greenhouse Gas Measurement, Monitoring, and Information System‚Äù (GHGMMIS) and discuss forthcoming refinements and co-development initiatives between the U.S. Government and its stakeholders for 2025 and beyond.\nA23P-05 - Identifying, quantifying, and attributing methane and carbon dioxide point source emissions from space with EMIT\nüìÖ Dec 10, 2024, üï£ 02:55 PM - 03:05 PM EST, üìç 154 A-B (Convention Center)\nIN33E-03 The U.S. Greenhouse Gas Center: A Trusted Online Platform for Data Access, Visualization, and Analysis\nüìÖ Dec 11, 2024, üï£ 02:30 PM - 02:40 PM EST, üìç Marquis 3-4 (Marriott Marquis)\nThis presentation will provide an overview of the development of the US GHG Center portal and underlying data system throughout the project‚Äôs beta phase. Its current status and plans for future capabilities will also be discussed.\nIN43D-01U.S. Greenhouse Gas Center Cyberinfrastructure: Automating Data Discovery, Transformation and STAC Management\nüìÖ Dec 12, 2024, üï£ 02:10 PM - 02:40 PM EST, üìç Marquis 12-13 (Marriott Marquis)\nThe US GHG Center system leverages analysis-ready cloud-optimized data for dissemination, analysis, and visualization of greenhouse gas datasets. With regular data additions and routine updates, this presentation provides an overview of an automated pipeline that has been developed to help integrate and maintain the datasets accessible from the US GHG Center portal.\nGC51E-03 Federally Coordinated Greenhouse Gas Information for Decision Making\nüìÖ Dec 13, 2024, üï£ 8:54 AM - 9:06 AM EST, üìç 103 A-B (Convention Center)\nAfter extensive stakeholder engagement, the US GHG Center is re-envisioning and exploring co-production of its capabilities, products, and datasets to better serve its users, especially policy makers. This presentation will feature findings from the demonstration phase stakeholder engagement process and the evolution of the stakeholder engagement strategy to better serve domestic decision making."
  },
  {
    "objectID": "ghg-center-at-agu-2024.html#posters-poster-sessions",
    "href": "ghg-center-at-agu-2024.html#posters-poster-sessions",
    "title": "The US GHG Center at American Geophysical Union Annual Meeting 2024",
    "section": "Posters & Poster Sessions",
    "text": "Posters & Poster Sessions\nA21K-1921 - Estimation of CH4 Emission Rates Using Statistical Inversion of a Gaussian Plume Model üìÖ Dec 10, 2024, üï£ 08:30 AM - 12:20 PM EST, üìç Hall B-C (Poster Hall) (Convention Center)\nA21K-1918 - Mapping Greenhouse Gas Emissions with AVIRIS-NG in NASA‚Äôs STAQS Airborne Campaign\nüìÖ Dec 10, 2024, üï£ 08:30 AM - 12:20 PM EST, üìç Hall B-C (Poster Hall) (Convention Center)\nSY21A - Large Emission Events Identified from Imaging Spectroscopy are Supporting Decision-making and Interagency Activities through the U. S. Greenhouse Gas Center\nüìÖ Dec 10, 2024, üï£ 01:40 PM - 05:30 PM EST, üìç Hall B-C (Poster Hall) (Convention Center)\nSY23D - Providing Accessible and Credible Greenhouse Gas Information from the US Government and Partners to Meet User Needs\nüìÖ Dec 10, 2024, üï£ 01:40 PM - 05:30 PM EST, üìç Hall B-C (Poster Hall) (Convention Center)\nDuring this session, we will demonstrate how the US GHG Center is playing a pivotal role in implementing the ‚ÄúNational Strategy to Advance an Integrated US Greenhouse Gas Measurement, Monitoring, and Information System‚Äù (GHGMMIS) and discuss forthcoming refinements and co-development initiatives between the U.S. Government and its stakeholders for 2025 and beyond.\nGC41H-0035 - Sensitivity and Uncertainty in Gas Detection using Matched Filters in Imaging Spectroscopy\nüìÖ Dec 12, 2024, üï£ 08:30 AM - 12:20 PM EST, üìç Hall B-C (Poster Hall) (Convention Center)"
  },
  {
    "objectID": "agenda.html",
    "href": "agenda.html",
    "title": "Workshop Agenda",
    "section": "",
    "text": "Workshop Agenda\nThe full-day workshop will be divided into the following sections:\n\n\n\n\n\n\n\n1:00 - 1:05 PM\nIntroduction | - Overview of the workshop and participant survey to assess skill levels. |\n\n\n1:05 - 1:15 PM\nIntroduction to US GHG Center Portal | - Overview of stories, topics, data, and available information. |\n\n\n1:15 - 1:25 PM\nExploring Data via Portal | - Demonstration of how to answer science questions using the portal, such as data visualization over time to assess policy impacts. |\n\n\n1:25 - 1:55 PM\nActivity 1 | - Hands-on data analysis and visualization‚Äîparticipants will explore time series data, perform date comparisons, and integrate results into a report document. |\n\n\n1:55 - 2:05 PM\nBREAK |\n\n\n2:05 - 2:15 PM\nSetup | - Ensure participants have the environment ready for open-source tools and code. |\n\n\n2:15 - 2:30 PM\nScience Background for Activity 2 | - Explore the relationship between precipitation rate and soil moisture in wetland emissions. |\n\n\n2:30 - 3:15 PM\nActivity 2 | - Using JupyterHub Notebooks with various GHG Center datasets, including external data, to examine the science question. Participants will draw conclusions and document their findings.\n\n\n3:15 - 3:25 PM\nBREAK |\n\n\n3:25 - 3:35 PM\nQGIS Introduction | - Overview of QGIS and its workflow process. |\n\n\n3:35 - 4:05 PM\nActivity 3 | - Hands-on session using QGIS to interact with portal datasets and generate actionable data for policy or decision-making, culminating in a documented report. |\n\n\n4:05 - 4:15 PM\nReview | - Recap key learning points, share outcomes from participants‚Äô documents. |\n\n\n4:15 - 4:20 PM\nFeedback | - Collect participant feedback via a survey and wrap up the workshop. |\n\n\n\nThroughout the workshop, facilitators will be available to provide support and guidance, ensuring participants are able to actively explore the workshop topics and apply their knowledge and skills to their own research projects."
  },
  {
    "objectID": "setup/setup_instructions.html",
    "href": "setup/setup_instructions.html",
    "title": "Repository Setup Instructions",
    "section": "",
    "text": "The how-tos and tutorials in this repository require a NASA Earthdata account, an installation of Git, and a compatible Python Environment.\nFor local Python environment setup we recommend using mamba to manage Python packages. To install mamba, download miniforge for your operating system. If using Windows, be sure to check the box to ‚ÄúAdd mamba to my PATH environment variable‚Äù to enable use of mamba directly from your command line interface. Note that this may cause an issue if you have an existing mamba install through Anaconda.\n\n\nconda create -n veda-ghg\nconda activate veda-ghg\n\n\n\nCheck requirements.txt.\nStill having trouble getting a compatible Python environment set up? Contact U.S.GHGC Team."
  },
  {
    "objectID": "setup/setup_instructions.html#python-environment-setup",
    "href": "setup/setup_instructions.html#python-environment-setup",
    "title": "Repository Setup Instructions",
    "section": "",
    "text": "conda create -n veda-ghg\nconda activate veda-ghg"
  },
  {
    "objectID": "setup/setup_instructions.html#installing-packages",
    "href": "setup/setup_instructions.html#installing-packages",
    "title": "Repository Setup Instructions",
    "section": "",
    "text": "Check requirements.txt.\nStill having trouble getting a compatible Python environment set up? Contact U.S.GHGC Team."
  },
  {
    "objectID": "chapters.html",
    "href": "chapters.html",
    "title": "Chapters",
    "section": "",
    "text": "The flow of the workshop\n\n\n\nIntro to the US GHG Center\nThe US GHG Center Data Catalog (STAC)\nThe US GHG Center JupyterHub environment\n\n\n\n\n\nEPA Gridded Methane Emissions Inventory\nComplementing anthropogenic GHG emissions with natural GHG emissions and fluxes\nIdentifying and quantifying emissions from large point source methane emission events leveraging aircraft and satellite data\n\n\n\n\n\nIntro to GitHub & Communicating Science Discoveries via Web Dashboard\n\n\n‚ÑπÔ∏è Content for each chapter will be added as they are prepared, please check back."
  },
  {
    "objectID": "chapters.html#introduction",
    "href": "chapters.html#introduction",
    "title": "Chapters",
    "section": "",
    "text": "Intro to the US GHG Center\nThe US GHG Center Data Catalog (STAC)\nThe US GHG Center JupyterHub environment"
  },
  {
    "objectID": "chapters.html#science-use-cases",
    "href": "chapters.html#science-use-cases",
    "title": "Chapters",
    "section": "",
    "text": "EPA Gridded Methane Emissions Inventory\nComplementing anthropogenic GHG emissions with natural GHG emissions and fluxes\nIdentifying and quantifying emissions from large point source methane emission events leveraging aircraft and satellite data"
  },
  {
    "objectID": "chapters.html#open-science-in-action",
    "href": "chapters.html#open-science-in-action",
    "title": "Chapters",
    "section": "",
    "text": "Intro to GitHub & Communicating Science Discoveries via Web Dashboard\n\n\n‚ÑπÔ∏è Content for each chapter will be added as they are prepared, please check back."
  },
  {
    "objectID": "sections/overview-us-ghg-center/index.html",
    "href": "sections/overview-us-ghg-center/index.html",
    "title": "Overview of the U.S. Greenhouse Gas Center",
    "section": "",
    "text": "Introduction (20 min)\nIntroduction and participant survey\nWelcome and GHG Center background\nIntroduction to US GHG Center portal, stories, topics, data, information, tools, news and information\nClick here to access the slides.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "Overview of the U.S. Greenhouse Gas Center and the Science"
    ]
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "",
    "text": "Methane (CH‚ÇÑ) emissions from wetlands are estimated to be the largest natural source of methane in the global CH‚ÇÑ budget, contributing to roughly one third of the total of natural and anthropogenic emissions. Wetland CH‚ÇÑ is produced by microbes breaking down organic matter in the oxygen deprived environment of inundated soils. Due to limited data availability, the details of the role of wetland CH‚ÇÑ emissions has thus far been underrepresented. Using the Wald Schnee und Landschaft version (LPJ-wsl) of the Lund-Potsdam-Jena Dynamic Global Vegetation Model (LPJ-DGVM) global CH‚ÇÑ emissions from wetlands are estimated at 0.5 x 0.5 degree resolution by simulating wetland extent and using characteristics of these inundated areas, such as soil moisture, temperature, and carbon content, to estimate CH‚ÇÑ quantities emitted into the atmosphere. Highlighted areas displayed in this dataset show concentrated methane sources from tropical and high latitude ecosystems. The LPJ-wsl Wetland Methane Emissions data product presented here consists of global daily and monthly model estimates of terrestrial wetland CH‚ÇÑ emissions from 1980 - 2021. These data are regularly used in conjunction with National Aeronautics and Space Administration‚Äôs (NASA) Goddard Earth Observing System (GEOS) model to simulate the impact of wetlands and other methane sources on atmospheric methane concentrations, to compare against satellite and airborne data, and to improve understanding and prediction of wetland emissions."
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#about-the-data",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#about-the-data",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "",
    "text": "Methane (CH‚ÇÑ) emissions from wetlands are estimated to be the largest natural source of methane in the global CH‚ÇÑ budget, contributing to roughly one third of the total of natural and anthropogenic emissions. Wetland CH‚ÇÑ is produced by microbes breaking down organic matter in the oxygen deprived environment of inundated soils. Due to limited data availability, the details of the role of wetland CH‚ÇÑ emissions has thus far been underrepresented. Using the Wald Schnee und Landschaft version (LPJ-wsl) of the Lund-Potsdam-Jena Dynamic Global Vegetation Model (LPJ-DGVM) global CH‚ÇÑ emissions from wetlands are estimated at 0.5 x 0.5 degree resolution by simulating wetland extent and using characteristics of these inundated areas, such as soil moisture, temperature, and carbon content, to estimate CH‚ÇÑ quantities emitted into the atmosphere. Highlighted areas displayed in this dataset show concentrated methane sources from tropical and high latitude ecosystems. The LPJ-wsl Wetland Methane Emissions data product presented here consists of global daily and monthly model estimates of terrestrial wetland CH‚ÇÑ emissions from 1980 - 2021. These data are regularly used in conjunction with National Aeronautics and Space Administration‚Äôs (NASA) Goddard Earth Observing System (GEOS) model to simulate the impact of wetlands and other methane sources on atmospheric methane concentrations, to compare against satellite and airborne data, and to improve understanding and prediction of wetland emissions."
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#requirements",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#requirements",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Requirements",
    "text": "Requirements\n\nSet up Python Environment - See setup_instructions.md in the /setup/ folder"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#learning-objectives",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#learning-objectives",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Learning Objectives",
    "text": "Learning Objectives\n\nHow to use U.S. GHG Center STAC Catalog to access Wetland Methane Emissions, LPJ-wsl Model data\nHow to use earthaccess to find MERRA-2 data\nHow to visualize datasets using folium and perform zonal statistics\nHow to plot time series for MERRA-2 variables and Wetland Methane Emissions, LPJ-wsl Model and analyze the results"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#approach",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#approach",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Approach",
    "text": "Approach\n\nIdentify available dates and temporal frequency of observations for the given collection using the GHGC API /stacendpoint. The collection processed in this notebook is the Wetland Methane Emissions, LPJ-wsl Model data product\nPass the STAC item into the raster API /stac/tilejson.json endpoint\nAccess the MERRA-2 data for different variables (precipitation rate, surface soil moisture)\nDefine the spatial region of interest\nUsing plugins from folium to visualize two tiles (side-by-side), allowing time point comparison\nAfter the visualization, perform zonal statistics for a given polygon\nPlot monthly time series for LPJ-wetland emission and different MERRA-2 dataset and analyze them"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#data",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#data",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Data",
    "text": "Data\n\nMonthly LPJ Wetland CH4 Emissions (U.S.GHG Center STAC)\nMonthly MERRA-2 Precipitation RateDataset: MERRA2_400.tavgM_2d_flx_Nx Variable: PRECTOT https://disc.gsfc.nasa.gov/datasets/M2TMNXFLX_5.12.4/summary\nMonthly MERRA-2 Surface Soil MoistureDataset: MERRA2_400.tavgM_2d_lnd_Nx Variable: SFMC Long-term mean variable: GWETTOP https://disc.gsfc.nasa.gov/datasets/M2TMNXLND_5.12.4/summary\nMonthly MERRA-2 T2MDataset: MERRA2_400.instM_2d_asm_Nx Variable: T2M https://disc.gsfc.nasa.gov/datasets/M2IMNXASM_5.12.4/summary\nMERRA-2 Long-Term MeansMERRA2.tavgC_2d_ltm_Nx https://disc.gsfc.nasa.gov/datasets/M2TCNXLTM_1/summary"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#setup",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#setup",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Setup",
    "text": "Setup\nImport the required Python libraries by running the next cell.\n\n# import earthaccess\nimport os\nimport warnings\nimport requests\nimport pandas as pd\nos.environ['USE_PYGEOS'] = '0'\nimport geopandas\nimport folium\nimport folium.plugins\nimport seaborn as sns\nimport glob\nimport numpy as np\nimport netCDF4 as nc\nimport matplotlib.pyplot as plt\nimport branca.colormap as cm\n\nfrom folium import Map, TileLayer \nfrom branca.element import Figure\nfrom pystac_client import Client \nfrom pyproj import Geod\nfrom shapely import wkt\nfrom datetime import datetime"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#nasa-earth-data-login-credentials",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#nasa-earth-data-login-credentials",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "NASA Earth Data Login Credentials",
    "text": "NASA Earth Data Login Credentials\nTo download or stream NASA data you will need an Earthdata account, you can create one here https://urs.earthdata.nasa.gov/home. We will use the login function from the earthaccess library for authentication before downloading at the end of the notebook. This function can also be used to create a local .netrc file if it doesn‚Äôt exist or add your login info to an existing .netrc file. If no Earthdata Login credentials are found in the .netrc you‚Äôll be prompted for them. This step is not necessary to conduct searches but is needed to download or stream data.\n\n# from netrc import netrc\n# from subprocess import Popen\n# from platform import system\n# from getpass import getpass\n# import os\n# import requests\n# import xarray as xr\n# import s3fs\n# import boto3\n# import cartopy.crs as ccrs\n# import cartopy.feature as cfeature\n# import matplotlib.pyplot as plt\n# import warnings\n# from IPython.display import display, Markdown\n\n# if (boto3.client('s3').meta.region_name == 'us-west-2'):\n#     display(Markdown('### us-west-2 Region Check: &#x2705;'))\n# else:\n#     display(Markdown('### us-west-2 Region Check: &#10060;'))\n#     raise ValueError('Your notebook is not running inside the AWS us-west-2 region, and will not be able to directly access NASA Earthdata S3 buckets')\n\n# urs = 'urs.earthdata.nasa.gov'    # Earthdata URL endpoint for authentication\n# prompts = ['Enter NASA Earthdata Login Username: ',\n#            'Enter NASA Earthdata Login Password: ']\n\n# netrc_name = \".netrc\"\n\n# # Determine if netrc file exists, and if so, if it includes NASA Earthdata Login Credentials\n# try:\n#     netrcDir = os.path.expanduser(f\"~/{netrc_name}\")\n#     # Check credentials against URS, and if username exists\n#     netrc(netrcDir).authenticators(urs)[0]\n\n# # Below, create a netrc file and prompt user for NASA Earthdata Login Username and Password\n# except FileNotFoundError:\n#     homeDir = os.path.expanduser(\"~\")\n#     Popen('touch {0}{2} | echo machine {1} &gt;&gt; {0}{2}'.format(homeDir + os.sep, urs, netrc_name), shell=True)\n#     Popen('echo login {} &gt;&gt; {}{}'.format(getpass(prompt=prompts[0]), homeDir + os.sep, netrc_name), shell=True)\n#     Popen('echo \\'password {} \\'&gt;&gt; {}{}'.format(getpass(prompt=prompts[1]), homeDir + os.sep, netrc_name), shell=True)\n#     # Set restrictive permissions\n#     Popen('chmod 0600 {0}{1}'.format(homeDir + os.sep, netrc_name), shell=True)\n\n# gesdisc_s3 = \"https://data.gesdisc.earthdata.nasa.gov/s3credentials\"\n\n# # Define a function for S3 access credentials\n\n# def begin_s3_direct_access(url: str=gesdisc_s3):\n#     response = requests.get(url).json()\n#     return s3fs.S3FileSystem(key=response['accessKeyId'],\n#                              secret=response['secretAccessKey'],\n#                              token=response['sessionToken'],\n#                              client_kwargs={'region_name':'us-west-2'})\n\n# fs = begin_s3_direct_access()\n\n\n# fn = 's3://gesdisc-cumulus-prod-protected/MERRA2/M2T1NXSLV.5.12.4/2019/03/MERRA2_400.tavg1_2d_slv_Nx.20190313.nc4'\n\n# fs.info(fn)\n# fs.ls('s3://gesdisc-cumulus-prod-protected/MERRA2/')"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#querying-the-stac-api",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#querying-the-stac-api",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Querying the STAC API",
    "text": "Querying the STAC API\nSearch for the LPJ Wetland Methane Emissions Data using the Raster API and its STAC collection name!\n\n# Provide STAC and RASTER API endpoints\nSTAC_API_URL = \"http://earth.gov/ghgcenter/api/stac\"\nRASTER_API_URL = \"https://earth.gov/ghgcenter/api/raster\"\n\n# Please use the collection name similar to the one used in STAC collection\n# Name of the collection for wetland methane monthly emissions \ncollection_name = \"lpjeosim-wetlandch4-monthgrid-v1\"\n\n\n# Fetching the collection from STAC collections using appropriate endpoint\n# The 'requests' library allows a HTTP request possible\ncollection = requests.get(f\"{STAC_API_URL}/collections/{collection_name}\").json()\ncollection\n\n{'id': 'lpjeosim-wetlandch4-monthgrid-v1',\n 'type': 'Collection',\n 'links': [{'rel': 'items',\n   'type': 'application/geo+json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/collections/lpjeosim-wetlandch4-monthgrid-v1/items'},\n  {'rel': 'parent',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/'},\n  {'rel': 'root',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/'},\n  {'rel': 'self',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/collections/lpjeosim-wetlandch4-monthgrid-v1'}],\n 'title': '(Monthly) Wetland Methane Emissions, LPJ-EOSIM Model v1',\n 'extent': {'spatial': {'bbox': [[-180, -90, 180, 90]]},\n  'temporal': {'interval': [['1990-01-01 00:00:00+00',\n     '2024-09-30 00:00:00+00']]}},\n 'license': 'CC0-1.0',\n 'renders': {'dashboard': {'assets': ['ensemble-mean-ch4-wetlands-emissions'],\n   'rescale': [[0, 3e-09]],\n   'colormap_name': 'magma'},\n  'era5-ch4-wetlands-emissions': {'assets': ['era5-ch4-wetlands-emissions'],\n   'rescale': [[0, 3e-09]],\n   'colormap_name': 'magma'},\n  'merra2-ch4-wetlands-emissions': {'assets': ['merra2-ch4-wetlands-emissions'],\n   'rescale': [[0, 3e-09]],\n   'colormap_name': 'magma'},\n  'ensemble-mean-ch4-wetlands-emissions': {'assets': ['ensemble-mean-ch4-wetlands-emissions'],\n   'rescale': [[0, 3e-09]],\n   'colormap_name': 'magma'}},\n 'providers': [{'name': 'NASA'}],\n 'summaries': {'datetime': ['1990-01-01T00:00:00Z', '2024-09-30T00:00:00Z']},\n 'description': 'Global, monthly estimates of methane (CH‚ÇÑ) emissions from terrestrial wetlands at 0.5 x 0.5 degree spatial resolution using the Earth Observation SIMulator version (LPJ-EOSIM) of the Lund-Potsdam-Jena Dynamic Global Vegetation Model (LPJ-DGVM). Methane emissions from vegetated wetlands are estimated to be the largest natural source of methane in the global CH‚ÇÑ budget, contributing to roughly one third of the total of natural and anthropogenic emissions. Wetland CH‚ÇÑ is produced by microbes breaking down organic matter in the oxygen deprived environment of inundated soils. Due to limited data availability, the details of the role of wetland CH‚ÇÑ emissions have thus far been underrepresented. The LPJ-EOSIM model estimates wetland methane emissions by simulating wetland extent and using characteristics of these inundated areas such as soil moisture, temperature, and carbon content to estimate CH‚ÇÑ quantities emitted into the atmosphere. Input climate forcing data comes from Modern-Era Retrospective analysis for Research and Applications Version 2 (MERRA-2) data and ECMWF Re-Analysis data (ERA5). An ensemble layer provides the result of the mean of the MERRA-2 and ERA5 layers. All data layers are in units of kilograms of methane per meter squared per second. The source data can be found at https://doi.org/10.5067/Community/LPJ-EOSIM/LPJ_EOSIM_L2_MCH4E.001 and https://doi.org/10.5067/Community/LPJ-EOSIM/LPJ_EOSIM_L2_MCH4E_LL.001.',\n 'item_assets': {'era5-ch4-wetlands-emissions': {'type': 'image/tiff; application=geotiff; profile=cloud-optimized',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) (ERA5) Wetland CH‚ÇÑ Emissions LPJ-EOSIM Model',\n   'description': 'Monthly CH‚ÇÑ from wetlands constructed using ERA5 climate forcing data input to the LPJ-EOSIM model.'},\n  'merra2-ch4-wetlands-emissions': {'type': 'image/tiff; application=geotiff; profile=cloud-optimized',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) (MERRA-2) Wetland CH‚ÇÑ Emissions LPJ-EOSIM Model',\n   'description': 'Monthly CH‚ÇÑ emissions from wetlands constructed using MERRA-2 climate forcing data input to the LPJ-EOSIM model.'},\n  'ensemble-mean-ch4-wetlands-emissions': {'type': 'image/tiff; application=geotiff; profile=cloud-optimized',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) Ensemble Mean Wetland CH‚ÇÑ Emissions LPJ-EOSIM Model',\n   'description': 'Monthly CH‚ÇÑ emissions from wetlands constructed using an ensemble of climate forcing data sources input to the LPJ-EOSIM model (mean of ERA5 and MERRA-2 layers).'}},\n 'stac_version': '1.0.0',\n 'stac_extensions': ['https://stac-extensions.github.io/render/v1.0.0/schema.json',\n  'https://stac-extensions.github.io/item-assets/v1.0.0/schema.json'],\n 'dashboard:is_periodic': True,\n 'dashboard:time_density': 'month'}\n\n\nHere we are examining the contents of our collection under summaries. We notice the data is available from January 1980 to May 2021. By looking at dashboard: time density, we can see that these observations are collected monthly.\n\n# Create a function that would search for the number of items in above data collection in the STAC API\ndef get_item_count(collection_id):\n    count = 0\n    items_url = f\"{STAC_API_URL}/collections/{collection_id}/items\"\n\n    while True:\n        response = requests.get(items_url)\n\n        if not response.ok:\n            print(\"error getting items\")\n            exit()\n\n        stac = response.json()\n        count += int(stac[\"context\"].get(\"returned\", 0))\n        next = [link for link in stac[\"links\"] if link[\"rel\"] == \"next\"]\n\n        if not next:\n            break\n        items_url = next[0][\"href\"]\n\n    return count\n\n\n# Check total number of items available\nnumber_of_items = get_item_count(collection_name)\nitems = requests.get(f\"{STAC_API_URL}/collections/{collection_name}/items?limit={number_of_items}\").json()[\"features\"]\nprint(f\"Found {len(items)} items\")\n\nFound 417 items\n\n\n\n# Examining the first item in the collection\n# Keep in mind that a list starts from 0, 1, 2,... therefore ‚Äò[0]‚Äô is referring to the first item in the list/collection \nitems[0]\n\n{'id': 'lpjeosim-wetlandch4-monthgrid-v1-202409',\n 'bbox': [-180.0, -90.0, 180.0, 90.0],\n 'type': 'Feature',\n 'links': [{'rel': 'collection',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/collections/lpjeosim-wetlandch4-monthgrid-v1'},\n  {'rel': 'parent',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/collections/lpjeosim-wetlandch4-monthgrid-v1'},\n  {'rel': 'root',\n   'type': 'application/json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/'},\n  {'rel': 'self',\n   'type': 'application/geo+json',\n   'href': 'https://earth.gov/ghgcenter/api/stac/collections/lpjeosim-wetlandch4-monthgrid-v1/items/lpjeosim-wetlandch4-monthgrid-v1-202409'},\n  {'title': 'Map of Item',\n   'href': 'https://earth.gov/ghgcenter/api/raster/collections/lpjeosim-wetlandch4-monthgrid-v1/items/lpjeosim-wetlandch4-monthgrid-v1-202409/map?assets=ensemble-mean-ch4-wetlands-emissions&rescale=0%2C3e-09&colormap_name=magma',\n   'rel': 'preview',\n   'type': 'text/html'}],\n 'assets': {'era5-ch4-wetlands-emissions': {'href': 's3://lp-prod-protected/LPJ_EOSIM_L2_MCH4E_LL.001/LPJ_EOSIM_L2_MCH4E_LL_001_202409/LPJ_EOSIM_L2_MCH4E_LL_ERA5_001_202409.tif',\n   'type': 'image/tiff; application=geotiff',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) Wetland Methane Emissions, ERA5 LPJ-EOSIM Model v1',\n   'proj:bbox': [-180.0, -90.0, 180.0, 90.0],\n   'proj:wkt2': 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]',\n   'proj:shape': [360, 720],\n   'description': 'Methane emissions from wetlands in units of grams of methane per meter squared per month. ECMWF Re-Analysis (ERA5) as input to LPJ-EOSIM model.',\n   'raster:bands': [{'scale': 1.0,\n     'nodata': -99999.0,\n     'offset': 0.0,\n     'sampling': 'area',\n     'data_type': 'float32',\n     'histogram': {'max': 2.652328578989227e-09,\n      'min': 0.0,\n      'count': 11,\n      'buckets': [58788, 2273, 893, 295, 86, 55, 28, 27, 25, 12]},\n     'statistics': {'mean': 5.66190073532181e-11,\n      'stddev': 1.5782847879528068e-10,\n      'maximum': 2.652328578989227e-09,\n      'minimum': 0.0,\n      'valid_percent': 24.10570987654321}}],\n   'proj:geometry': {'type': 'Polygon',\n    'coordinates': [[[-180.0, -90.0],\n      [180.0, -90.0],\n      [180.0, 90.0],\n      [-180.0, 90.0],\n      [-180.0, -90.0]]]},\n   'proj:transform': [0.5, 0.0, -180.0, 0.0, -0.5, 90.0, 0.0, 0.0, 1.0]},\n  'merra2-ch4-wetlands-emissions': {'href': 's3://lp-prod-protected/LPJ_EOSIM_L2_MCH4E_LL.001/LPJ_EOSIM_L2_MCH4E_LL_001_202409/LPJ_EOSIM_L2_MCH4E_LL_MERRA2_001_202409.tif',\n   'type': 'image/tiff; application=geotiff',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) Wetland Methane Emissions, MERRA-2 LPJ-EOSIM Model v1',\n   'proj:bbox': [-180.0, -90.0, 180.0, 90.0],\n   'proj:wkt2': 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]',\n   'proj:shape': [360, 720],\n   'description': 'Methane emissions from wetlands in units of grams of methane per meter squared per month. Modern-Era Retrospective analysis for Research and Applications Version 2 (MERRA-2) data as input to LPJ-EOSIM model.',\n   'raster:bands': [{'scale': 1.0,\n     'nodata': -99999.0,\n     'offset': 0.0,\n     'sampling': 'area',\n     'data_type': 'float32',\n     'histogram': {'max': 3.324015729333496e-09,\n      'min': 0.0,\n      'count': 11,\n      'buckets': [59463, 2085, 645, 117, 49, 24, 26, 28, 27, 18]},\n     'statistics': {'mean': 6.103722626751041e-11,\n      'stddev': 1.7666511134050393e-10,\n      'maximum': 3.324015729333496e-09,\n      'minimum': 0.0,\n      'valid_percent': 24.10570987654321}}],\n   'proj:geometry': {'type': 'Polygon',\n    'coordinates': [[[-180.0, -90.0],\n      [180.0, -90.0],\n      [180.0, 90.0],\n      [-180.0, 90.0],\n      [-180.0, -90.0]]]},\n   'proj:transform': [0.5, 0.0, -180.0, 0.0, -0.5, 90.0, 0.0, 0.0, 1.0]},\n  'ensemble-mean-ch4-wetlands-emissions': {'href': 's3://lp-prod-protected/LPJ_EOSIM_L2_MCH4E_LL.001/LPJ_EOSIM_L2_MCH4E_LL_001_202409/LPJ_EOSIM_L2_MCH4E_LL_ensemble_mean_001_202409.tif',\n   'type': 'image/tiff; application=geotiff',\n   'roles': ['data', 'layer'],\n   'title': '(Monthly) Wetland Methane Emissions, Ensemble Mean LPJ-EOSIM Model v1',\n   'proj:bbox': [-180.0, -90.0, 180.0, 90.0],\n   'proj:wkt2': 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]',\n   'proj:shape': [360, 720],\n   'description': 'Methane emissions from wetlands in units of grams of methane per meter squared per month. Ensemble of multiple climate forcing data sources input to LPJ-EOSIM model.',\n   'raster:bands': [{'scale': 1.0,\n     'nodata': -99999.0,\n     'offset': 0.0,\n     'sampling': 'area',\n     'data_type': 'float32',\n     'histogram': {'max': 2.8594921985813926e-09,\n      'min': 0.0,\n      'count': 11,\n      'buckets': [58998, 2236, 843, 206, 59, 38, 29, 30, 23, 20]},\n     'statistics': {'mean': 5.882811499085084e-11,\n      'stddev': 1.6458567639187077e-10,\n      'maximum': 2.8594921985813926e-09,\n      'minimum': 0.0,\n      'valid_percent': 24.10570987654321}}],\n   'proj:geometry': {'type': 'Polygon',\n    'coordinates': [[[-180.0, -90.0],\n      [180.0, -90.0],\n      [180.0, 90.0],\n      [-180.0, 90.0],\n      [-180.0, -90.0]]]},\n   'proj:transform': [0.5, 0.0, -180.0, 0.0, -0.5, 90.0, 0.0, 0.0, 1.0]},\n  'rendered_preview': {'title': 'Rendered preview',\n   'href': 'https://earth.gov/ghgcenter/api/raster/collections/lpjeosim-wetlandch4-monthgrid-v1/items/lpjeosim-wetlandch4-monthgrid-v1-202409/preview.png?assets=ensemble-mean-ch4-wetlands-emissions&rescale=0%2C3e-09&colormap_name=magma',\n   'rel': 'preview',\n   'roles': ['overview'],\n   'type': 'image/png'}},\n 'geometry': {'type': 'Polygon',\n  'coordinates': [[[-180, -90],\n    [180, -90],\n    [180, 90],\n    [-180, 90],\n    [-180, -90]]]},\n 'collection': 'lpjeosim-wetlandch4-monthgrid-v1',\n 'properties': {'end_datetime': '2024-09-30T00:00:00+00:00',\n  'start_datetime': '2024-09-01T00:00:00+00:00'},\n 'stac_version': '1.0.0',\n 'stac_extensions': ['https://stac-extensions.github.io/raster/v1.1.0/schema.json',\n  'https://stac-extensions.github.io/projection/v1.1.0/schema.json']}\n\n\nBelow, we enter minimum and maximum values to provide our upper and lower bounds in ‚Äòrescale_values.‚Äô"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#search-for-merra-2-data",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#search-for-merra-2-data",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Search for MERRA-2 Data",
    "text": "Search for MERRA-2 Data\n\ndata_dir = f\"{os.getenv('HOME')}/shared/data/use-case-2\"   \nmerra_t2m_dir=f'{data_dir}/merra_t2m_dir/'\nmerra_soil_moisture_dir = f'{data_dir}/merra_soil_moisture_dir/'\nmerra_precip_rate_dir = f'{data_dir}/merra_precip_rate_dir/'\nmerra_t2m_clim_dir = f'{data_dir}/merra_t2m_clim_dir/'\n\nmerra_precip_rate_clim_dir = merra_t2m_clim_dir \nmerra_soil_moisture_clim_dir = merra_t2m_clim_dir"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#define-the-spatial-region-of-interest",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#define-the-spatial-region-of-interest",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Define the Spatial Region of Interest",
    "text": "Define the Spatial Region of Interest\nFor this example, our spatial region of interest (ROI) will be a region in the state of Louisiana (LA). In this example, we will create a rectangular ROI. The state of Louisiana encompasses a diverse range of non-tidal and tidal freshwater wetlands including palustrine, lacustrine, riverine, estuarine, and marine wetlands. These ecosystems cover roughly one-third of the state according to the U.S. Fish and Wildlife Service, making Louisiana an ideal site for monitoring the natural source of methane emissions.\n\n# We create a area of interest (polygon) on which will be used later \n\nboundaries={\n    'Global':[-180,180,-90,90],\n    'Louisiana': [-95.9,-87.50,28.7,33.5],\n    'CONUS':[-127.08,-63.87,23.55,49.19],   #   conus\n    'Florida':[-84.07,-79.14,24.85,30.5],\n    'Northeast':[-74.88,-69.81,40.48,42.88]\n}\nfocus = 'Louisiana'\n\naoi = boundaries[focus]\nlouisiana_aoi = {\n    \"type\": \"Feature\",\n    \"properties\": {},\n    \"geometry\": {\n        \"coordinates\": [\n            [\n                [aoi[0], aoi[2]], # SW Bounding Coordinate\n                [aoi[0], aoi[3]], # NW Bounding Coordinate\n                [aoi[1], aoi[3]], # NE Bounding Coordinate\n                [aoi[1],aoi[2]],  # SE Bounding Coordinate\n                [aoi[0], aoi[2]]  # Closing the polygon at the SW Bounding Coordinate\n            ]\n        ],\n        \"type\": \"Polygon\",\n    },\n}"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#opening-and-exploring-wetland-methane-emissions-data-using-the-raster-api",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#opening-and-exploring-wetland-methane-emissions-data-using-the-raster-api",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Opening and Exploring Wetland Methane Emissions Data Using the Raster API",
    "text": "Opening and Exploring Wetland Methane Emissions Data Using the Raster API\nIn this notebook, we will explore the temporal impacts of methane emissions. We will visualize the outputs on a map using folium.\n\n# To access the year value from each item more easily, this will let us query more explicitly by year and month (e.g., 2020-02)\nitems = {item[\"properties\"][\"start_datetime\"][:7]: item for item in items} \n\n\n# Set the asset value to the appropriate parameter \nasset_name = 'ensemble-mean-ch4-wetlands-emissions'\n\n\n# Set the minimum and maximum values to provide our upper and lower bounds\nrescale_values = {'max': 0.000000003, 'min': 0.0}\n\nNow, we will pass the item id, collection name, and rescaling_factor to the Raster API endpoint. We will do this twice, once for May 2020 and again for May 2021, so we can visualize each event independently.\n\n# Set a colormap for the granule\n# Please refer to matplotlib library if you'd prefer choosing a different color ramp (https://matplotlib.org/stable/users/explain/colors/colormaps.html)\ncolor_map = \"magma\" \n\n\ndate1, date2 = '2020-05', '2021-05'\n\ntile_1 = requests.get(\n\n    # Pass the collection name, collection date, and its ID\n    # To change the year and month of the observed parameter, you can modify month mentioned above.\n    f\"{RASTER_API_URL}/collections/{items[date1]['collection']}/items/{items[date1]['id']}/tilejson.json?\"\n\n    # Pass the asset name\n    f\"&assets={asset_name}\"\n\n    # Pass the color formula and colormap for custom visualization\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n\n    # Pass the minimum and maximum values for rescaling\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\", \n\n# Return response in JSON format\n).json()\n\ntile_1\n\n{'tilejson': '2.2.0',\n 'version': '1.0.0',\n 'scheme': 'xyz',\n 'tiles': ['https://earth.gov/ghgcenter/api/raster/collections/lpjeosim-wetlandch4-monthgrid-v1/items/lpjeosim-wetlandch4-monthgrid-v1-202005/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?assets=ensemble-mean-ch4-wetlands-emissions&color_formula=gamma+r+1.05&colormap_name=magma&rescale=0.0%2C3e-09'],\n 'minzoom': 0,\n 'maxzoom': 24,\n 'bounds': [-180.0, -90.0, 180.0, 90.0],\n 'center': [0.0, 0.0, 0]}\n\n\n\n# May 2021 tile\ntile_2 = requests.get(\n\n    # Pass the collection name, collection date, and its ID\n    # To change the year and month of the observed parameter, you can modify the month mentioned above.\n    f\"{RASTER_API_URL}/collections/{items[date2]['collection']}/items/{items[date2]['id']}/tilejson.json?\"\n\n    # Pass the asset name\n    f\"&assets={asset_name}\"\n\n    # Pass the color formula and colormap for custom visualization\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n\n    # Pass the minimum and maximum values for rescaling\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\",\n\n# Return response in JSON format \n).json()\n\n# Print the properties of the retrieved granule to the console\ntile_2\n\n{'tilejson': '2.2.0',\n 'version': '1.0.0',\n 'scheme': 'xyz',\n 'tiles': ['https://earth.gov/ghgcenter/api/raster/collections/lpjeosim-wetlandch4-monthgrid-v1/items/lpjeosim-wetlandch4-monthgrid-v1-202105/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?assets=ensemble-mean-ch4-wetlands-emissions&color_formula=gamma+r+1.05&colormap_name=magma&rescale=0.0%2C3e-09'],\n 'minzoom': 0,\n 'maxzoom': 24,\n 'bounds': [-180.0, -90.0, 180.0, 90.0],\n 'center': [0.0, 0.0, 0]}"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#visualizing-ch‚ÇÑ-emissions",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#visualizing-ch‚ÇÑ-emissions",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Visualizing CH‚ÇÑ Emissions",
    "text": "Visualizing CH‚ÇÑ Emissions\n\n# We will import folium to map and folium.plugins to allow side-by-side mapping\n# Set initial zoom and center of map for CH‚ÇÑ Layer\n# Centre of map [latitude,longitude]\nfrom folium.plugins import MousePosition\nmap_ = folium.Map(location=(30,-90), zoom_start=6)\n\n\n# Use the 'TileLayer' library to display the raster layers and adjust the transparency of the layers on the map\n# May 2020\nvis_tile_1 = TileLayer(\n    tiles=tile_1[\"tiles\"][0],\n    attr=\"GHG\",\n    opacity=0.5,\n)\n\n\n# May 2021\nvis_tile_2 = TileLayer(\n    tiles=tile_2[\"tiles\"][0],\n    attr=\"GHG\",\n    opacity=0.5,\n)\n\n\n# Use the SideBySideLayers plugin to compare two layers on the same map\nsbs = folium.plugins.SideBySideLayers(layer_left=vis_tile_1, layer_right=vis_tile_2)\nvis_tile_1.add_to(map_)\nvis_tile_2.add_to(map_)\n\n\n# Load the GeoJSON file representing the state of Louisiana\nfolium.GeoJson(louisiana_aoi, name=\"louisiana, USA\").add_to(map_)\nsbs.add_to(map_)\nMousePosition().add_to(map_)\n\n\n# Visualizing the map\nmap_\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook\n\n\n\n# We will import folium to map and folium.plugins to add multiple tiles with layer control\n# Defining the breaks in the colormap \ncolormap = cm.LinearColormap(colors = ['#2c115f','#721f81','#b73779','#f1605d','#feb078'], vmin = 0, vmax = 0.000000003 )\n\n\n# Add an appropriate caption, in this case it would be grams of methane per meter squared per day\ncolormap.caption = 'g CH‚ÇÑ/m¬≤/day'\ntile_2 = requests.get(\n\n    # Pass the collection name, collection date, and its ID\n    # To change the year and month of the observed parameter, you can modify the month mentioned above.\n    f\"{RASTER_API_URL}/collections/{items[date2]['collection']}/items/{items[date2]['id']}/tilejson.json?\"\n\n    # Pass the asset name\n    f\"&assets={asset_name}\"\n\n    # Pass the color formula and colormap for custom visualization\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n\n    # Pass the minimum and maximum values for rescaling\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\",\n\n# Return response in JSON format \n).json()\n\nnew_date1, new_date2, new_date3 = '2021-05', '2021-06','2021-07'\n# Reading the tiles from raster api\ntile_date_1 = requests.get(\n    f\"{RASTER_API_URL}/collections/{items[new_date1]['collection']}/items/{items[new_date1]['id']}/tilejson.json?\"\n    \"&assets=ch4-wetlands-emissions\"\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\", \n).json()\ntile_date_1\n\n\ntile_date_2 = requests.get(\n    f\"{RASTER_API_URL}/collections/{items[new_date2]['collection']}/items/{items[new_date2]['id']}/tilejson.json?\"\n    \"&assets=ch4-wetlands-emissions\"\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\", \n).json()\ntile_date_2\n\n\ntile_date_3 = requests.get(\n    f\"{RASTER_API_URL}/collections/{items[new_date3]['collection']}/items/{items[new_date3]['id']}/tilejson.json?\"\n    \"&assets=ch4-wetlands-emissions\"\n    f\"&color_formula=gamma+r+1.05&colormap_name={color_map}\"\n    f\"&rescale={rescale_values['min']},{rescale_values['max']}\", \n).json()\ntile_date_3\n\n\n# Interactive visulaization \nmap_ = folium.Map(location=(30,-90), zoom_start=5)\n\n# May 2021\ntile1 = TileLayer(\n    tiles=tile_date_1[\"tiles\"][0],\n    attr=\"GHG\",\n    opacity=0.8,\n    name=new_date1\n)\ntile1.add_to(map_)\n\n# June 2021\ntile2 = TileLayer(\n    tiles=tile_date_2[\"tiles\"][0],\n    attr=\"GHG\",\n    opacity=0.8,\n    name=new_date2\n)\ntile2.add_to(map_)\n\n# July 2021\ntile3 = TileLayer(\n    tiles=tile_date_3[\"tiles\"][0],\n    attr=\"GHG\",\n    opacity=0.8,\n    name=new_date3\n)\ntile3.add_to(map_)\n\nfolium.GeoJson(louisiana_aoi, name=\"louisiana, USA\").add_to(map_)\nfolium.LayerControl(collapsed=False,position='bottomleft').add_to(map_)\n\nsvg_style = '&lt;style&gt;svg#legend {font-size: 14px; background-color: white;}&lt;/style&gt;'\nmap_.get_root().header.add_child(folium.Element(svg_style))\nmap_.add_child(colormap)\n\n\n# Visualizing the map\nmap_\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#opening-and-exploring-merra-2-data",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#opening-and-exploring-merra-2-data",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Opening and Exploring MERRA-2 Data",
    "text": "Opening and Exploring MERRA-2 Data\nIn this notebook, we will explore the MERRA-2 data. We will visualize the outputs on a map using folium.\n\n# Fetch the MERRA-2 collection from STAC collections using the appropriate endpoint\nitems = requests.get(f\"{STAC_API_URL}/collections/{collection_name}/items?limit={number_of_items}\").json()[\"features\"]\n\n\n## visualize MERRA-2\n# [-95.9,-87.50,28.7,33.5]\n\n\n# Insert the path to the NetCDF file\nfile_path = f'{data_dir}/merra_t2m_dir/MERRA2_100.instM_2d_asm_Nx.199101.nc4'  # Replace with the path to your NetCDF file\ndataset = nc.Dataset(file_path)\n\n\n# Access coordinates (if needed)\nlatitude = dataset.variables['lat'][:]\nlongitude = dataset.variables['lon'][:]\n\n\n# Access variables\nvariable_name = 'T2M'  # Replace with the variable you want to plot\n# dataset.variables['T2M'][0, 237:248, 135:150]\nvariable_data = dataset.variables['T2M'][0, :,:]\n\n# Close the NetCDF file\n# dataset.close()\n# Plot the data\nplt.imshow(variable_data, origin='lower', cmap='viridis', extent=(longitude.min(), longitude.max(), latitude.min(), latitude.max()))\nplt.colorbar(label='Variable Unit')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')\nplt.title(f'Plot of {variable_name}')\nplt.show()\n\n\n---------------------------------------------------------------------------\nFileNotFoundError                         Traceback (most recent call last)\nCell In[67], line 7\n      1 ## visualize MERRA-2\n      2 # [-95.9,-87.50,28.7,33.5]\n      3 \n      4 \n      5 # Insert the path to the NetCDF file\n      6 file_path = f'{data_dir}/merra_t2m_dir/MERRA2_100.instM_2d_asm_Nx.199101.nc4'  # Replace with the path to your NetCDF file\n----&gt; 7 dataset = nc.Dataset(file_path)\n     10 # Access coordinates (if needed)\n     11 latitude = dataset.variables['lat'][:]\n\nFile src/netCDF4/_netCDF4.pyx:2469, in netCDF4._netCDF4.Dataset.__init__()\n\nFile src/netCDF4/_netCDF4.pyx:2028, in netCDF4._netCDF4._ensure_nc_success()\n\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/sidchaudhary/shared/data/use-case-2/merra_t2m_dir/MERRA2_100.instM_2d_asm_Nx.199101.nc4'\n\n\n\n\nprint('variables provided in this netcdf are:', dataset.variables)"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#generate-statistics-and-time-series-line-plots-for-the-methane-emission-based-on-observations-collected-in-2020-and-2021",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#generate-statistics-and-time-series-line-plots-for-the-methane-emission-based-on-observations-collected-in-2020-and-2021",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Generate Statistics and Time Series Line Plots for the Methane Emission based on observations collected in 2020 and 2021",
    "text": "Generate Statistics and Time Series Line Plots for the Methane Emission based on observations collected in 2020 and 2021\n\n# The bounding box should be passed to the geojson param as a geojson Feature or FeatureCollection\n# The following function generates statistics for the assigned parameter \ndef generate_stats(item, geojson):\n    result = requests.post(\n        f\"{RASTER_API_URL}/cog/statistics\",\n        params={\"url\": item[\"assets\"][\"ch4-wetlands-emissions\"][\"href\"]},\n        json=geojson,\n    ).json()\n    return {\n        **result[\"properties\"],\n        \"datetime\": item[\"properties\"][\"datetime\"],\n    }\n\nWith the function above, we can generate the statistics for the area of interest.\n\n# Default value is to fetch the data for the past 2 years (2020, 2021). You can change the indices to fetch the values for years beyond that.\nstats = [generate_stats(item, louisiana_aoi) for item in items[:24]]\nstats\n\n\n# Manipulating and cleaning the stats output from previous cell\ndef clean_stats(stats_json) -&gt; pd.DataFrame:\n    df = pd.json_normalize(stats_json)\n    df.columns = [col.replace(\"statistics.b1.\", \"\") for col in df.columns]\n    df[\"date\"] = pd.to_datetime(df[\"datetime\"])\n    return df\n\n\ndf = clean_stats(stats)\ndf.head(5)\n\n\n# Filtering the stats for year 2020 and 2021\ndf_2020_2021 = df[(df['date'].dt.year == 2020) | (df['date'].dt.year == 2021)]\ndf_2020_2021['year'] = pd.to_datetime(df_2020_2021['datetime']).dt.year\ndf_2020_2021['month'] = pd.to_datetime(df_2020_2021['datetime']).dt.month\ndf_2020_2021"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#visualizing-the-data-as-a-time-series",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#visualizing-the-data-as-a-time-series",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Visualizing the Data as a Time Series",
    "text": "Visualizing the Data as a Time Series\nWe can now plot the time-series of the wetland methane emissions for the state of Louisiana for the 2020-2021 (January - December) period.\n\nitems = {item[\"properties\"][\"datetime\"][:7]: item for item in items} \nfig = plt.figure(figsize=(20, 10))\n\n\n# Set the plot elements \nsns.lineplot(\n    df_2020_2021,\n    x = 'month', \n    y = 'sum',\n    hue= 'year',\n    palette='flare'\n)\n\n\n# Set the labels for the X and Y axis and assign a title for the plot \n# plt.legend()\nplt.xlabel(\"months\")\nplt.ylabel(\"CH4 emissions g/m2\")\nplt.title(\"CH4 emission Values for Louisiana for 2020 and 2021\")"
  },
  {
    "objectID": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#generate-statistics-and-time-series-lineplots-for-merra2-data-in-year-2020-2021",
    "href": "sections/activity-1/lpjeosim-wetlandch4-grid-v1_User_Notebook.html#generate-statistics-and-time-series-lineplots-for-merra2-data-in-year-2020-2021",
    "title": "Interactive Session: Complementing anthropogenic GHG emissions with natural GHG emissions and fluxes",
    "section": "Generate Statistics and Time Series Lineplots for MERRA2 Data in Year 2020, 2021",
    "text": "Generate Statistics and Time Series Lineplots for MERRA2 Data in Year 2020, 2021\n\nparams={\n    'MERRA-2 T2M':\n        {'var':'T2M',\n        'cmap':'#000000',\n        'dir':merra_t2m_dir,\n        'nickname':'merra2_t2m',\n        'climdir':merra_t2m_clim_dir,\n        'climvar':'T2MMEAN'},\n    'MERRA-2 Surface Soil Moisture':\n        {'var':'GWETTOP',\n        'cmap':'#000000',\n        'dir':merra_soil_moisture_dir,\n        'nickname':'merra2_sm',\n        'climdir':merra_soil_moisture_clim_dir,\n        'climvar':'GWETTOP'},\n    'MERRA-2 Precipitation Rate':\n        {'var':'PRECTOT',\n        'cmap':'#000000',\n        'dir':merra_precip_rate_dir,\n        'nickname':'merra2_pr',\n        'climdir':merra_precip_rate_clim_dir,\n        'climvar':'PRECTOT'}\n}\n\nyear=1991\n\nanomaly = 1\nparam = ['MERRA-2 Precipitation Rate','MERRA-2 Surface Soil Moisture', 'MERRA-2 T2M' ]\n\n\ndef get_merra2_timeseries(year,focus,p,anomaly):\n    files = glob.glob(params[p]['dir']+'*.nc4') # change the year for which you want to read the files\n    if anomaly:\n        try:\n            clim_files = glob.glob(params[p]['climdir']+'*.nc4')\n        except:\n            print('Climatological mean files (climdir) not found for specified parameter.')\n            breakpoint()\n    month_labels = []\n    box_totals = []\n    month_field = []\n    dt = []\n    for i,f in enumerate(files):\n        data = nc.Dataset(f)\n        \n        #   Get bounding box\n        wlat = np.logical_and(\n            data['lat'][:] &lt; boundaries[focus][3],\n            data['lat'][:] &gt; boundaries[focus][2]\n        )\n        wlon = np.logical_and(\n            data['lon'][:] &lt; boundaries[focus][1],\n            data['lon'][:] &gt; boundaries[focus][0]\n        )\n\n        datestamp = f.split('.')[-2]\n        month = int(datestamp[-2::])\n\n        dt.append(datetime(year,month,1))\n        month_labels.append(datetime(year,month,1).strftime('%B'))\n\n        if anomaly:\n            #   Make sure you read the climatology for the right month (whichfile)\n            whichfile = [datetime(1991,month,1).strftime('%y%m')[1:] in f for f in clim_files] # Change the year for the data being used.\n            climdata = nc.Dataset(np.array(clim_files)[whichfile][0])\n            \n            #   Calculate sum (emissions) or mean (met params) over your bounding box\n            if 'LPJ' in p:\n                clim_box_total = np.nansum(climdata[params[p]['climvar']][0,wlat,wlon])\n                now_box_total = np.nansum(data[params[p]['var']][0,wlat,wlon])\n            elif 'MERRA' in p:\n                clim_box_total = np.nanmean(climdata[params[p]['climvar']][0,wlat,wlon])\n                now_box_total = np.nanmean(data[params[p]['var']][0,wlat,wlon])\n\n            #   Replace fill values with NaN \n            #   Otherwise differencing might give wild results? (Just be safe)\n            wfillclim = np.where(climdata[params[p]['climvar']][0,:,:] == climdata[params[p]['climvar']]._FillValue)\n            climfield = climdata[params[p]['climvar']][0,:,:]\n            climfield[wfillclim] = np.nan\n            wfillnow = np.where(data[params[p]['var']][0,:,:] == data[params[p]['var']]._FillValue)\n            nowfield = data[params[p]['var']][0,:,:]\n            nowfield[wfillnow] = np.nan\n\n            #   And finally, difference current month and long-term mean \n            box_totals.append(now_box_total - clim_box_total)\n            month_field.append(nowfield - climfield)\n            climdata.close()\n        else:\n            if 'LPJ' in p:\n                box_totals.append(np.nansum(data[params[p]['var']][0,wlat,wlon]))\n            elif 'MERRA' in p:\n                box_totals.append(np.nanmean(data[params[p]['var']][0,wlat,wlon]))\n            #   Replace fill values with NaN (otherwise maps are hard to read) \n            month_field.append(data[params[p]['var']][0,:,:])\n            wfill = np.where(month_field[-1] == data[params[p]['var']]._FillValue)\n            month_field[-1][wfill] = np.nan\n            #breakpoint()\n\n    #   Sort in case months are out of order\n    dti = np.argsort(dt)\n    month_labels = np.array(month_labels)[dti]\n    box_totals = np.array(box_totals)[dti]\n    month_field = np.array(month_field)[dti]\n\n    # print('mean ',np.nanmean(month_field))\n    # print('std ',np.nanstd(month_field))\n\n    data_return = {\n        'month_labels':month_labels,\n        'box_totals':box_totals,\n        'month_fields':month_field,\n        'units':data[params[p]['var']].units,\n        'lat':data['lat'][:],\n        'lon':data['lon'][:],\n        'mean':np.nanmean(month_field),\n        'std' : np.nanstd(month_field)\n    }\n    data.close()\n    return data_return \n\n\n# List of color codes assigned\ncolors = ['#1B8FB5', '#16B573', '#C76B21']\nfor i,p in enumerate(param):\n    \n    ts = get_merra2_timeseries(year,focus,p,anomaly)\n    print(f'Mean of variable {p} is {ts[\"mean\"]}')\n    print(f'Standard deviation of variable {p} is {ts[\"std\"]}')\n        \n    # if i == 0:\n    fig= plt.figure(figsize=(6,3))\n    ax = fig.add_subplot(1,1,1)\n\n    #breakpoint()\n    try:\n        ax.plot(\n            list(range(0,12)),\n            ts['box_totals'],\n            linestyle='-',\n            linewidth=2,\n            color=colors[i],\n            markersize=4,\n            marker='o',\n            label=p\n        )\n    except ValueError:\n        print('Double check that you have all twelve months of MERRA-2 data downloaded!')\n        print(params[p]['dir'])\n        breakpoint()\n\n    #   Construct plot title\n    title = '%s\\n%s Mean Monthly %s'%(focus,year,p)\n    if anomaly:\n        title+=' Anomaly' \n    if 'LPJ' in p:\n        title = title.replace('Mean','Total')\n    plt.title(title)\n    \n    plt.xticks(list(range(0,12)))\n    ax.set_xticklabels(ts['month_labels'],rotation=40,ha='right')\n\n\n    ax.legend(loc='best')\n    nickname = params[p]['nickname']\n    savename = 'box_summed_%s_%s_%s.png'% \\\n        (nickname,year,focus)\n    if anomaly:\n        ax.plot(list(range(-1,13)),np.zeros(14),linewidth=0.4)\n        savename = savename.replace('.png','_Anomaly.png')\n    ax.set_xlim(-1,12)\n    ax.set_ylim(min(ts['box_totals']),max(ts['box_totals']))     #   manual per parameter\n    plt.show()\n    plt.savefig(savename.split('/')[-1],dpi=300,bbox_inches='tight')"
  },
  {
    "objectID": "sections/activity-3/index.html",
    "href": "sections/activity-3/index.html",
    "title": "Explore Data Integration with QGIS",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides."
  },
  {
    "objectID": "sections/us-ghg-center-and-veda/index.html",
    "href": "sections/us-ghg-center-and-veda/index.html",
    "title": "US GHG Center & VEDA",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "US GHG Center and VEDA / Data Access and Visualization",
      "US GHG Center & VEDA"
    ]
  },
  {
    "objectID": "sections/closing/index.html",
    "href": "sections/closing/index.html",
    "title": "Closing Remarks",
    "section": "",
    "text": "Coming Soon\nClick here to access the slides.",
    "crumbs": [
      "SCHEDULE - US GHG Center at AGU 2024",
      "Sections",
      "Closing"
    ]
  }
]